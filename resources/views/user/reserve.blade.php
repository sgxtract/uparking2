<style>
    .fancy-checkbox-label > input[type=radio] {
                    position: absolute;
                    opacity: 0;
                    cursor: inherit;
                }
                .fancy-checkbox-label {
                    font-weight: normal;
                    cursor: pointer;
                }
            
                /* Slots 1 to 62 */
                #slot-1{
                    position: absolute;
                    left: 133px;
                    top: 615px;"
                }
                #slot-2{
                    position: absolute;
                    left: 166px;
                    top: 615px;
                }
                #slot-3{
                    position: absolute;
                    left: 209px;
                    top: 615px;
                }
                #slot-4{
                    position: absolute;
                    left: 240px;
                    top: 615px;
                }
                #slot-5{
                    position: absolute;
                    left: 283px;
                    top: 615px;
                }
                #slot-6{
                    position: absolute;
                    left: 314px;
                    top: 615px;
                }
                #slot-7{
                    position: absolute;
                    left: 357px;
                    top: 615px;
                }
                #slot-8{
                    position: absolute;
                    left: 389px;
                    top: 615px;
                }
                #slot-9{
                    position: absolute;
                    left: 431px;
                    top: 615px;
                }
                #slot-10{
                    position: absolute;
                    left: 462;
                    top: 615px;
                }
                #slot-11{
                    position: absolute;
                    left: 505px;
                    top: 615px;
                }
                #slot-12{
                    position: absolute;
                    left: 540px;
                    top: 615px;
                }
                #slot-13{
                    position: absolute;
                    left: 787px;
                    top: 555px;
                }
                #slot-14{
                    position: absolute;
                    left: 787px;
                    top: 588px;
                }
                #slot-15{
                    position: absolute;
                    left: 133px;
                    top: 256px;
                }
                #slot-16{
                    position: absolute;
                    left: 167px;
                    top: 256px;
                }
                #slot-17{
                    position: absolute;
                    left: 211px;
                    top: 256px;
                }
                #slot-18{
                    position: absolute;
                    left: 244px;
                    top: 256px;
                }
                #slot-19{
                    position: absolute;
                    left: 284px;
                    top: 256px;
                }
                #slot-20{
                    position: absolute;
                    left: 315px;
                    top: 256px;
                }
                #slot-21{
                    position: absolute;
                    left: 358px;
                    top: 256px;
                }
                #slot-22{
                    position: absolute;
                    left: 390px;
                    top: 256px;
                }
                #slot-23{
                    position: absolute;
                    left: 432px;
                    top: 256px;
                }
                #slot-24{
                    position: absolute;left: 465px;top: 256px;
                }
                #slot-25{
                    position: absolute;left: 507px;top: 256px;
                }
                #slot-26{
                    position: absolute;left: 538px;top: 256px;
                }
                #slot-27{
                    position: absolute;left: 578px;top: 256px;
                }
                #slot-28{
                    position: absolute;left: 612px;top: 256px;
                }
                #slot-29{
                    position: absolute;left: 654px;top: 256px;
                }
                #slot-30{
                    position: absolute;left: 685px;top: 256px;
                }
                #slot-31{
                    position: absolute;left: 728px;top: 256px;
                }
                #slot-32{
                    position: absolute;left: 759px;top: 256px;
                }
                #slot-33{
                    position: absolute;left: 803px;top: 256px;
                }
                #slot-34{
                    position: absolute;left: 836px;top: 256px;
                }
                #slot-35{
                    position: absolute;left: 201px;top: 380px;
                }
                #slot-36{
                    position: absolute;left: 235px;top: 380px;
                }
                #slot-37{
                    position: absolute;left: 278px;top: 380px;
                }
                #slot-38{
                    position: absolute;left: 309px;top: 380px;
                }
                #slot-39{
                    position: absolute;left: 350px;top: 380px;
                }
                #slot-40{
                    position: absolute;left: 382px;top: 380px;
                }
                #slot-41{
                    position: absolute;left: 425px;top: 380px;
                }
                #slot-42{
                    position: absolute;left: 456px;top: 380px;
                }
                #slot-43{
                    position: absolute;left: 500px;top: 380px;
                }
                #slot-44{
                    position: absolute;left: 530px;top: 380px;
                }
                #slot-45{
                    position: absolute;left: 572px;top: 380px;
                }
                #slot-46{
                    position: absolute;left: 604px;top: 380px;
                }
                #slot-47{
                    position: absolute;left: 647px;top: 380px;
                }
                #slot-48{
                    position: absolute;left: 680px;top: 380px;
                }
                #slot-49{
                    position: absolute;left: 201px;top: 468px;
                }
                #slot-50{
                    position: absolute;left: 235px;top: 468px;
                }
                #slot-51{
                    position: absolute;left: 278px;top: 468px;
                }
                #slot-52{
                    position: absolute;left: 309px;top: 468px;
                }
                #slot-53{
                    position: absolute;left: 350px;top: 468px;
                }
                #slot-54{
                    position: absolute;left: 382px;top: 468px;
                }
                #slot-55{
                    position: absolute;left: 425px;top: 468px;
                }
                #slot-56{
                    position: absolute;left: 456px;top: 468px;
                }
                #slot-57{
                    position: absolute;left: 500px;top: 468px;
                }
                #slot-58{
                    position: absolute;left: 530px;top: 468px;
                }
                #slot-59{
                    position: absolute;left: 572px;top: 468px;
                }
                #slot-60{
                    position: absolute;left: 604px;top: 468px;
                }
                #slot-61{
                    position: absolute;left: 647px;top: 468px;
                }
                #slot-62{
                    position: absolute;left: 680px;top: 468px;
                }
            </style>

@extends('layouts.admin')

@section('title')
Reserve (User)
@endsection

@section('content')
<div class="main-panel">
    <div class="content-wrapper">
        <div class="row">
            <div class="col-xl-12 col-lg-12 col-md-12 grid-margin stretch-card">
                <!--reserve card-->
                <div class="card" style="background-image: url(" {{ asset('images/reserve.jpg') }}");">
                    <div class="card-body">
                        <h4>Reserve</h4>
                        <p class="card-description">
                            <small>Choose a slot to be reserved.</small>
                        </p>
                        <hr>

                        @if (session('success'))
                        <div class="alert alert-success">
                            {{ session('success') }}
                        </div>
                        @endif

                        @if (session('error'))
                        <div class="alert alert-danger">
                            {!! session('error') !!}
                        </div>
                        @endif

                        @if ($errors->any())
                        <div class="alert alert-danger">
                            <ul class="list-ticked">
                                @foreach ($errors->all() as $error)
                                <li>{{ $error }}</li>
                                @endforeach
                            </ul>
                        </div>
                        @endif

                        <div class="row">
                            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6">
                                <div class="card card-statistics">
                                    <div class="card-body">
                                        <div class="clearfix">
                                            <div class="float-left">
                                                <i class="mdi mdi-map-marker-radius text-dark icon-lg"></i>
                                            </div>
                                            <div class="float-right">
                                                <p class="mb-0 text-right">Available Slots</p>
                                                <div class="fluid-container">
                                                    <h3 class="font-weight-medium text-right mb-0">{{ $free->count() }}</h3>
                                                </div>
                                            </div>
                                        </div>
                                        <p class="text-muted mt-3 mb-0">
                                            <i class="mdi mdi-car-connected mr-1" aria-hidden="true"></i> Total available slots
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6">
                                <div class="card card-statistics">
                                    <div class="card-body">
                                        <div class="clearfix">
                                            <div class="float-left">
                                                <i class="mdi mdi-car text-warning icon-lg"></i>
                                            </div>
                                            <div class="float-right">
                                                <p class="mb-0 text-right">Reserves</p>
                                                <div class="fluid-container">
                                                    <h3 class="font-weight-medium text-right mb-0">{{ $reserves->count() }}</h3>
                                                </div>
                                            </div>
                                        </div>
                                        <p class="text-muted mt-3 mb-0">
                                            <i class="mdi mdi-car-connected mr-1" aria-hidden="true"></i> Current reserves
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xl-4 col-lg-4 col-md-4 col-sm-6">
                                <div class="card card-statistics">
                                    <div class="card-body">
                                        <div class="clearfix">
                                            <div class="float-left">
                                                <i class="mdi mdi-car text-danger icon-lg"></i>
                                            </div>
                                            <div class="float-right">
                                                <p class="mb-0 text-right">Occupied</p>
                                                <div class="fluid-container">
                                                    <h3 class="font-weight-medium text-right mb-0">{{ $occupied->count() }}</h3>
                                                </div>
                                            </div>
                                        </div>
                                        <p class="text-muted mt-3 mb-0">
                                            <i class="mdi mdi-car-connected mr-1" aria-hidden="true"></i> Current occupied slots
                                        </p>
                                    </div>
                                </div>
                            </div>

                            {{-- cars start --}}
                            <div class="col-md-12">

                                {{-- Slot 1 to 12 --}}
                                @for ($i = 1; $i <= 12; $i++) @php $obj=\App\Reserve::where('slot_number', "Slot $i" )->get();
                                    if(count($obj)):
                                    $obj = json_decode($obj)[0];
                                    @endphp

                                    @if ($obj->status =='reserved')
                                    <label class="fancy-checkbox-label" id="slot-{{ $i }}" data-toggle="modal"
                                        data-target="#modalReserved">
                                        <input type="radio" onclick="func()" value="Slot {{ $i }}" name="slots">
                                        <span class="fancy-checkbox fancy-checkbox-img"></span>
                                        <img src="{{ asset('images/cars/car-orange-top.png') }}" width="27" height="55">
                                    </label>
                                    @elseif ($obj->status == 'occupied')
                                    <label class="fancy-checkbox-label" id="slot-{{ $i }}" data-toggle="modal"
                                        data-target="#modalOccupied">
                                        <input type="radio" onclick="func()" value="Slot {{ $i }}" name="slots">
                                        <span class="fancy-checkbox fancy-checkbox-img"></span>
                                        <img src="{{ asset('images/cars/car-red-top.png') }}" width="27" height="55">
                                    </label>
                                    @else
                                    <label class="fancy-checkbox-label" id="slot-{{ $i }}" data-toggle="modal"
                                        data-target="#myModal">
                                        <input type="radio" onclick="func()" value="Slot {{ $i }}" name="slots">
                                        <span class="fancy-checkbox fancy-checkbox-img"></span>
                                        <img src="{{ asset('images/cars/car-grey-top.png') }}" width="27" height="55">
                                    </label>
                                    @endif

                                    @php endif; @endphp
                                    @endfor

                                    {{-- Slot 13 to 14 --}}
                                    @for ($i = 13; $i <= 14; $i++) @php $obj=\App\Reserve::where('slot_number',
                                        "Slot $i" )->get();
                                        if(count($obj)):
                                        $obj = json_decode($obj)[0];
                                        @endphp

                                        @if ($obj->status =='reserved')
                                        <label class="fancy-checkbox-label" id="slot-{{ $i }}" data-toggle="modal"
                                            data-target="#modalReserved">
                                            <input type="radio" onclick="func()" value="Slot {{ $i }}" name="slots">
                                            <span class="fancy-checkbox fancy-checkbox-img"></span>
                                            <img src="{{ asset('images/cars/car-orange-pwd.png') }}" width="54" height="27">
                                        </label>

                                        @elseif ($obj->status =='occupied')
                                        <label class="fancy-checkbox-label" id="slot-{{ $i }}" data-toggle="modal"
                                            data-target="#modalOccupied">
                                            <input type="radio" onclick="func()" value="Slot {{ $i }}" name="slots">
                                            <span class="fancy-checkbox fancy-checkbox-img"></span>
                                            <img src="{{ asset('images/cars/car-red-pwd.png') }}" width="54" height="27">
                                        </label>

                                        @else
                                        <label class="fancy-checkbox-label" id="slot-{{ $i }}" data-toggle="modal"
                                            data-target="#myModal">
                                            <input type="radio" onclick="func()" value="Slot {{ $i }}" name="slots">
                                            <span class="fancy-checkbox fancy-checkbox-img"></span>
                                            <img src="{{ asset('images/cars/car-grey-pwd.png') }}" width="54" height="27">
                                        </label>
                                        @endif

                                        @php endif; @endphp
                                        @endfor

                                        {{-- Slot 15 to 34 --}}
                                        @for ($i = 15; $i <= 34; $i++) @php $obj=\App\Reserve::where('slot_number',
                                            "Slot $i" )->get();
                                            if(count($obj)):
                                            $obj = json_decode($obj)[0];
                                            @endphp

                                            @if ($obj->status =='reserved')
                                            <label class="fancy-checkbox-label" id="slot-{{ $i }}" data-toggle="modal"
                                                data-target="#modalReserved">
                                                <input type="radio" onclick="func()" value="Slot {{ $i }}" name="slots">
                                                <span class="fancy-checkbox fancy-checkbox-img"></span>
                                                <img src="{{ asset('images/cars/car-orange-btm.png') }}" width="27"
                                                    height="55">
                                            </label>

                                            @elseif ($obj->status =='occupied')
                                            <label class="fancy-checkbox-label" id="slot-{{ $i }}" data-toggle="modal"
                                                data-target="#modalOccupied">
                                                <input type="radio" onclick="func()" value="Slot {{ $i }}" name="slots">
                                                <span class="fancy-checkbox fancy-checkbox-img"></span>
                                                <img src="{{ asset('images/cars/car-red-btm.png') }}" width="27" height="55">
                                            </label>

                                            @else
                                            <label class="fancy-checkbox-label" id="slot-{{ $i }}" data-toggle="modal"
                                                data-target="#myModal">
                                                <input type="radio" onclick="func()" value="Slot {{ $i }}" name="slots">
                                                <span class="fancy-checkbox fancy-checkbox-img"></span>
                                                <img src="{{ asset('images/cars/car-grey-btm.png') }}" width="27"
                                                    height="55">
                                            </label>
                                            @endif

                                            @php endif; @endphp
                                            @endfor

                                            {{-- Slot 35 to 48 --}}
                                            @for ($i = 35; $i <= 48; $i++) @php $obj=\App\Reserve::where('slot_number',
                                                "Slot $i" )->get();
                                                if(count($obj)):
                                                $obj = json_decode($obj)[0];
                                                @endphp

                                                @if ($obj->status =='reserved')
                                                <label class="fancy-checkbox-label" id="slot-{{ $i }}" data-toggle="modal"
                                                    data-target="#modalReserved">
                                                    <input type="radio" onclick="func()" value="Slot {{ $i }}" name="slots">
                                                    <span class="fancy-checkbox fancy-checkbox-img"></span>
                                                    <img src="{{ asset('images/cars/car-orange-top.png') }}" width="27"
                                                        height="55">
                                                </label>

                                                @elseif ($obj->status =='occupied')
                                                <label class="fancy-checkbox-label" id="slot-{{ $i }}" data-toggle="modal"
                                                    data-target="#modalOccupied">
                                                    <input type="radio" onclick="func()" value="Slot {{ $i }}" name="slots">
                                                    <span class="fancy-checkbox fancy-checkbox-img"></span>
                                                    <img src="{{ asset('images/cars/car-red-top.png') }}" width="27"
                                                        height="55">
                                                </label>

                                                @else
                                                <label class="fancy-checkbox-label" id="slot-{{ $i }}" data-toggle="modal"
                                                    data-target="#myModal">
                                                    <input type="radio" onclick="func()" value="Slot {{ $i }}" name="slots">
                                                    <span class="fancy-checkbox fancy-checkbox-img"></span>
                                                    <img src="{{ asset('images/cars/car-grey-top.png') }}" width="27"
                                                        height="55">
                                                </label>
                                                @endif

                                                @php endif; @endphp
                                                @endfor

                                                {{-- Slot 49 to 62 --}}
                                                @for ($i = 49; $i <= 62; $i++) @php $obj=\App\Reserve::where('slot_number',
                                                    "Slot $i" )->get();
                                                    if(count($obj)):
                                                    $obj = json_decode($obj)[0];
                                                    @endphp

                                                    @if ($obj->status =='reserved')
                                                    <label class="fancy-checkbox-label" id="slot-{{ $i }}" data-toggle="modal"
                                                        data-target="#modalReserved">
                                                        <input type="radio" onclick="func()" value="Slot {{ $i }}" name="slots">
                                                        <span class="fancy-checkbox fancy-checkbox-img"></span>
                                                        <img src="{{ asset('images/cars/car-orange-btm.png') }}" width="27"
                                                            height="55">
                                                    </label>

                                                    @elseif ($obj->status =='occupied')
                                                    <label class="fancy-checkbox-label" id="slot-{{ $i }}" data-toggle="modal"
                                                        data-target="#modalOccupied">
                                                        <input type="radio" onclick="func()" value="Slot {{ $i }}" name="slots">
                                                        <span class="fancy-checkbox fancy-checkbox-img"></span>
                                                        <img src="{{ asset('images/cars/car-red-btm.png') }}" width="27"
                                                            height="55">
                                                    </label>
                                                    @else
                                                    <label class="fancy-checkbox-label" id="slot-{{ $i }}" data-toggle="modal"
                                                        data-target="#myModal">
                                                        <input type="radio" onclick="func()" value="Slot {{ $i }}" name="slots">
                                                        <span class="fancy-checkbox fancy-checkbox-img"></span>
                                                        <img src="{{ asset('images/cars/car-grey-btm.png') }}" width="27"
                                                            height="55">
                                                    </label>
                                                    @endif
                                                    @php endif; @endphp
                                                    @endfor
                                                    <img src="{{ asset('images/reserve.jpg') }}" alt="" width="1150">
                            </div>
                            {{-- cars end --}}

                            <!-- Modal Reserve -->
                            <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                                aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 class="modal-title" id="myModalLabel"></h4>
                                        </div>
                                        <div class="modal-body">
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <form action="{{ route('userReserveSlot', $user) }}" method="POST">
                                                        @csrf
                                                        <div class="form-group">
                                                            <h5>Enter plate no. (ABC####)</h5>
                                                            <div class="input-group col-xs-12">
                                                                <input type="text" name="plate_number" class="form-control text-center"
                                                                    placeholder="ABC####">
                                                                <input type="hidden" name="slot_number" id="myModalLabel2"
                                                                    value="">
                                                                <span class="input-group-append">
                                                                    <button type="submit" class="btn btn-dark btn-fw">
                                                                        <i class="mdi mdi-map-marker-radius"></i>Reserve</button>
                                                                </span>
                                                            </div>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                            {{-- Parking Information --}}
                                            <hr>
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <h5>Parking Information <span class="mdi mdi-information-variant"></span></h5>
                                                    <hr>
                                                    <div class="row mt-3">
                                                        <div class="col-md-4">
                                                            <p>Parking Rate:</p>
                                                        </div>
                                                        <div class="col-md-8">
                                                            <p>₱ 50.00 first two (2) hours.</p>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <p>Hourly Rate:</p>
                                                        </div>
                                                        <div class="col-md-8">
                                                            <p>₱ 25.00 / hr.</p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            {{-- Parking Information End --}}
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-default" data-dismiss="modal">Back</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Modal Reserve End -->

                            <!-- Modal Occupied Start -->
                            <div class="modal fade" id="modalOccupied" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                                aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 class="modal-title" id="myModalLabel"></h4>
                                        </div>
                                        <div class="modal-body">
                                            {{-- Parking Information --}}
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <h5>Occupied <span class="mdi mdi-alert"></span></h5>
                                                    <hr>
                                                    <div class="row mt-3">
                                                        <div class="col-md-4">
                                                            <p>Plate Number:</p>
                                                        </div>
                                                        <div class="col-md-8">
                                                            <p></p>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <p>Start Time: </p>
                                                        </div>
                                                        <div class="col-md-8">
                                                            <p>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            {{-- Parking Information End --}}
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-default" data-dismiss="modal">Back</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Modal Occupied End -->

                            <!-- Modal Reserved Start -->
                            <div class="modal fade" id="modalReserved" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
                                aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h4 class="modal-title" id="myModalLabel"></h4>
                                        </div>
                                        <div class="modal-body">
                                            {{-- Parking Information --}}
                                            <div class="row">
                                                <div class="col-md-12">
                                                    <h5>Reserved <span class="mdi mdi-alert"></span></h5>
                                                    <hr>
                                                    <div class="row mt-3">
                                                        <div class="col-md-4">
                                                            <p>Plate Number:</p>
                                                        </div>
                                                        <div class="col-md-8">
                                                            <p></p>
                                                        </div>
                                                    </div>
                                                    <div class="row">
                                                        <div class="col-md-4">
                                                            <p>Start Time: </p>
                                                        </div>
                                                        <div class="col-md-8">
                                                            <p>
                                                            </p>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            {{-- Parking Information End --}}
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-default" data-dismiss="modal">Back</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <!-- Modal Reserved End -->
                        </div>
                    </div>
                </div>
                <!--reserve card ends-->
            </div>
        </div>
    </div>
</div>

<script>
    function func() {
        var val = document.querySelector('input[name="slots"]:checked').value;
        document.getElementById("myModalLabel").innerHTML = '<span class="mdi mdi-car"></span> Selected ' + val;
        document.getElementById("myModalLabel2").value = val;
    }

</script>
@endsection
